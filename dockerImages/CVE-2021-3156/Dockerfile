FROM       ubuntu:20.04
MAINTAINER Aleksandar Diklic "https://github.com/rastasheep"

RUN apt-get update

RUN apt-get install -y openssh-server cron gcc sudo=1.8.31-1ubuntu1 make
RUN mkdir /var/run/sshd


# Creating fake users
RUN useradd -m administrator
RUN echo 'administrator:administrator' | chpasswd
RUN useradd -m robert
RUN echo 'robert:robert' | chpasswd
RUN useradd -m amanda
RUN echo 'amanda:amanda' | chpasswd
RUN useradd -m postfix
RUN echo 'postfix:postfix' | chpasswd
RUN useradd -m apache
RUN echo 'apache:apache' | chpasswd
RUN useradd -m test1
RUN echo 'test1:test1' | chpasswd
RUN useradd -m testftp
RUN echo 'testftp:testftp' | chpasswd
RUN useradd -m upload
RUN echo 'upload:upload' | chpasswd
RUN useradd -m master
RUN echo 'master:master' | chpasswd
RUN useradd -m linux
RUN echo 'linux:linux' | chpasswd
RUN useradd -m temp
RUN echo 'temp:temp' | chpasswd
RUN useradd -m sales
RUN echo 'sales:sales' | chpasswd
RUN useradd -m testing
RUN echo 'testing:testing' | chpasswd
RUN useradd -m paul
RUN echo 'paul:paul' | chpasswd
RUN useradd -m www
RUN echo 'www:www' | chpasswd
RUN useradd -m tester
RUN echo 'tester:tester' | chpasswd
RUN useradd -m cyrus
RUN echo 'cyrus:cyrus' | chpasswd
RUN useradd -m michael
RUN echo 'michael:michael' | chpasswd
RUN useradd -m ftpuser
RUN echo 'ftpuser:ftpuser' | chpasswd
RUN useradd -m webmaster
RUN echo 'webmaster:webmaster' | chpasswd
RUN useradd -m tomcat
RUN echo 'tomcat:tomcat' | chpasswd
RUN useradd -m student
RUN echo 'student:student' | chpasswd
RUN useradd -m web
RUN echo 'web:web' | chpasswd
RUN useradd -m ftp
RUN echo 'ftp:ftp' | chpasswd
RUN useradd -m mysql
RUN echo 'mysql:mysql' | chpasswd
RUN useradd -m info
RUN echo 'info:info' | chpasswd
RUN useradd -m postgres
RUN echo 'postgres:postgres' | chpasswd
RUN useradd -m guest
RUN echo 'guest:guest' | chpasswd
RUN useradd -m nagios
RUN echo 'nagios:nagios' | chpasswd
RUN useradd -m user
RUN echo 'user:user' | chpasswd
RUN useradd -m oracle
RUN echo 'oracle:oracle' | chpasswd
RUN useradd -m admin
RUN echo 'admin:admin' | chpasswd
RUN useradd -m test

RUN echo 'test:test' | chpasswd
RUN echo 'news:news' | chpasswd
RUN echo 'games:games' | chpasswd
RUN echo 'backup:backup' | chpasswd

COPY backup.py /backup.py

RUN sed -ri 's/^#?PermitRootLogin\s+.*/PermitRootLogin yes/' /etc/ssh/sshd_config
RUN sed -ri 's/UsePAM yes/#UsePAM yes/g' /etc/ssh/sshd_config

RUN mkdir /root/.ssh

RUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

EXPOSE 22

CMD    ["/usr/sbin/sshd", "-D"]

